import * as bg from "@bgord/bun";
import type { ContentfulStatusCode } from "hono/utils/http-status";

class {{POLICY_NAME_PASCAL_CASE}}Error extends Error {
  constructor() {
    super();
    Object.setPrototypeOf(this, {{POLICY_NAME_PASCAL_CASE}}Error.prototype);
  }
}

type {{POLICY_NAME_PASCAL_CASE}}ConfigType = { count: number };

class {{POLICY_NAME_PASCAL_CASE}}Factory extends bg.Policy<{{POLICY_NAME_PASCAL_CASE}}ConfigType> {
  fails(config: {{POLICY_NAME_PASCAL_CASE}}ConfigType) {
    return config.count >= 1;
  }

  message = "{{POLICY_NAME_PASCAL_CASE}}";

  error = {{POLICY_NAME_PASCAL_CASE}}Error;

  code = 403 as ContentfulStatusCode;
}

export const {{POLICY_NAME_PASCAL_CASE}} = new {{POLICY_NAME_PASCAL_CASE}}Factory();
